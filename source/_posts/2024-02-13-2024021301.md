---
title: 【アップデート】アクセス解析とパンくずリストと私【放置しすぎ】
excerpt: 昨日OGPメタタグの出力にようやく手を付けたことをお伝えしましたが、実はそれ以外にもアップデートが必要なのにずっと放置してた項目が2つもありまして、それを数日前からの勢いにも乗って本日えいやっ…と作業して終わらせてみましたよ、という報告です。
date: 2024/02/13 23:45
layout: post
categories: [weblog]
tags: [site, update, google, analytics, ga4, breadcrumb, microdata, schema.org]
---
こなさんみんばんわ。  
特に平松愛理さんが好きだという訳ではないです。

さて、手を付けてなかったOGPメタタグの出力をようやく実装したことは、昨日お伝えした通り。

- [【ご報告】OGPのメタタグを出力するようにしました【やっとかよ】][yesterday]

[yesterday]: /weblog/2024021201/

なんですが、実はこれ以外にもアップデートしないといけない項目が2つほど残ってまして。ずっと前から「これやってね」とメールも来てるし、やらなあかんなーとは思いつつも、面倒くさくてやってなかったやつ。もう普通のサイト管理者さんならとうの昔に作業終わらせてておかしくないやつなので、まだ手を付けてないとか聞いたら失笑ものだと思います、はい。

まぁそんな感じだったのですが、ここ数日記事書いてアップしたり、コードを書いて機能を完成させたりしてる間に、何かやる気というか勢いが出てまいりましたので、本日はその流れに乗ってえいやっ…とばかりに、それらの放置してた作業を終わらせてみました。

さて、その放置してた作業とは? 次の2つです。

{% include ads_inarticle.html slot=4720985151 %}
{% include page_toc.html %}


## Googleアナリティクスを<abbr title="Universal Analytics">UA</abbr>→<abbr title="Google Analytics 4">GA4</abbr>へ移行

やっとですか、遅いですね。涙

まぁこれは基本、Googleさんが提示してくれるコード・スニペットを差し替えるだけなので簡単。すぐ終わりました。でも、これだけで済むんだったらもっと早くやっておけばよかったのに、という話でもあります。涙


## パンくずリストのマークアップ(microdata)をSchema.orgのものに

はい、もっと遅いですね。最初に警告が来たの2020年の1月やぞ、いい加減にしろ。涙

そんな訳で、すでにサポートの終わってるdata-vocabulary.orgの構造化データ語彙を使ったまま放置してたパンくずリストのマークアップを、Schema.orgの同等のものを使ってアップデートしました。

根幹となるマークアップはキープしつつ、microdata関連の内容（`itemtype`とか`itemprop`とかの属性値）を変更していけばいいのですが、宙で書ける訳がないので(´･_･`) 大元の[Schema.org][]に行きまして、そこにあるサンプルコードなどを参考にしつつ変更していきます。この作業はやはりちょっと時間がかかりました。

[Data-Vocabulary.org]: https://data-vocabulary.org/
[Schema.org]: https://schema.org/

変更を終えて試しに手元でビルドしてチェック、問題ないことを確認してサイトに反映したら、念のために[スキーマ マークアップ検証ツール][validator]で検証します。数ページをチェックして問題なければ大丈夫でしょう。あとはこれも念のために、[Googleサーチ・コンソール][console]から再検証の依頼を出しておきました。

[validator]: https://validator.schema.org/
[console]: https://search.google.com/search-console

これで終了。両方合わせて1時間くらいで終わったかな。お疲れさまでした。


## よかったね、これで何の問題もなくなったね!

…となればいいのですが、まだいくつかやっておくべきことがあるような気が。涙

そのうち1つはプライバシー・ポリシーのページですかね。まぁアクセス解析してたり広告貼ったりしてますので、データ収集してますよとかCookieの扱いはこうですとか、書いておいた方がいいじゃないですか。Amazonアソシエイトにも再挑戦してみようとか思ってるので、それなら尚更です。

[About][]ページにも<q cite="https://jeffreyfrancesco.org/about/">プライバシーポリシーなどが含まれます…という予定ですが、未完成です</q>などと書いてある程度には、以前からやらないといけない! とは思ってる作業なのですが、こちらも法律の専門家ではないので、何か参考になるものがないとさすがに一からは書けないなぁと。

もちろん調べ始めてはおりますが、まだまだちょっと研究しないと書けそうにありません。ああ、どこかにテンプレ的なやつが落ちてないものでしょうか…(；´Д｀)

[About]: /about/

とりあえず、遅くとも月末までには何とかしたいところです。
